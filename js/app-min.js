var itemcount=0,price=0,discount=0,totalprice=0,productprice=0,products=[],cartData=[];function fetchJSONFile(t,e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText);e&&e(t)}},a.open("GET",t),a.send()}function init(){document.getElementsByClassName("itemcount")[0].innerText=itemcount,document.getElementsByClassName("itemcount")[1].innerText=itemcount,document.getElementsByClassName("itemcount")[2].innerText=itemcount,document.getElementById("price").innerHTML=price,document.getElementById("discount").innerHTML=discount,document.getElementById("totalprice").innerHTML=discount}function productList(){if(0!=products.length)for(var t=0;t<products.length;t++)document.getElementById("multi-products").innerHTML+='<div class="multiboxes"><div class="big-box-one"><div class="label-one"><label>'+products[t].product_discount+'% off</label></div><div class="space-over-img"><div class="box-cm"> <img src="'+products[t].product_image+'"></div></div><div class="items-one"><div class="set-one"><p>'+products[t].product_name+'</p><label><span><i class="fa fa-dollar"></i>'+products[t].product_display+'</span> <i class="fa fa-dollar"></i>'+products[t].product_price+'</label></div><div class="set-two"><div class="add-to-cart"><a id="carts-title'+t+'" onclick="addToCart(\''+products[t].product_id+"','"+t+'\');"  class="addtoCart" href="javascript:void(0);">Add to cart</a></div></div></div></div></div>'}function addToCart(t,e){var a="carts-title"+e;document.getElementById(a).innerHTML="Added",document.getElementById(a).removeAttribute("onclick");for(var c=0;c<products.length;c++)if(products[c].product_id==t){for(var r=null,d=0;d<cartData.length;d++)if(cartData[d].product.product_id==products[c].product_id){r=cartData[d];break}if(null==r){r={product:products[c],product_qty:products[c].product_qty};cartData.push(r)}}cartListItems()}function cartListItems(){document.getElementsByClassName("itemcount")[0].innerText=cartData.length,document.getElementsByClassName("itemcount")[1].innerText=cartData.length,document.getElementsByClassName("itemcount")[2].innerText=cartData.length,document.getElementById("addtocartItem").innerHTML="",document.getElementById("price").innerHTML="",document.getElementById("discount").innerHTML="";var t=0,e=0,a=0;if(0!=cartData.length)for(var c=0;c<cartData.length;c++){var r='<tr><td><div class="img-item"><span><img src="'+cartData[c].product.product_image+'"></span> <span class="sm-item">'+cartData[c].product.product_name+'</span> <span class="value-last" onclick="removeProduct(\''+cartData[c].product.product_id+'\',this);"><i class="fa fa-remove"></i></span></div></td><td><div class="number"><span  onclick="decreseQuantity(\''+cartData[c].product.product_id+'\',this);" class="minus">-</span><input type="number" id="qty'+cartData[c].product.product_id+'" min="1" max="99" value="'+cartData[c].product_qty+'"/><span class="plus" onclick="increseQuantity(\''+cartData[c].product.product_id+'\',this);">+</span></div></td><td><p><i class="fa fa-dollar"></i>'+cartData[c].product.product_price.toFixed(2)+"</p></td></tr>";document.getElementById("addtocartItem").innerHTML+=r,e+=(a=parseFloat(cartData[c].product.product_price)*parseInt(cartData[c].product_qty))-a*(parseInt(cartData[c].product.product_discount)/100),t+=parseFloat(cartData[c].product.product_price)*parseInt(cartData[c].product_qty)}else document.getElementById("addtocartItem").innerHTML='<tr id="noitems"><td class="row-center" colspan="3">No records found</td></tr>';document.getElementById("price").innerHTML='<i class="fa fa-dollar"></i>'+t.toFixed(2),document.getElementById("discount").innerHTML='<i class="fa fa-dollar"></i>'+e.toFixed(2),totalprice=parseInt(t)-parseInt(e),document.getElementById("totalprice").innerHTML='<i class="fa fa-dollar"></i>'+totalprice.toFixed(2)}function increseQuantity(t){for(var e=0;e<cartData.length;e++)cartData[e].product.product_id==t&&cartData[e].product_qty++;cartListItems()}function decreseQuantity(t){for(var e=0;e<cartData.length;e++)if(cartData[e].product.product_id==t&&(cartData[e].product_qty--,0==cartData[e].product_qty))return!1;cartListItems()}function removeProduct(t){if(confirm("Are you sure you want to remove this item?")){for(var e=0;e<cartData.length;e++)cartData[e].product.product_id==t&&cartData.splice(e,1);cartListItems()}}fetchJSONFile("data.json",function(t){if(init(),0!=t.items.length){for(var e=0;e<t.items.length;e++){var a={product_id:e+1,product_qty:1,product_price:t.items[e].price.actual,product_display:t.items[e].price.display,product_discount:t.items[e].discount,product_image:t.items[e].image,product_name:t.items[e].name};products.push(a)}productList()}});